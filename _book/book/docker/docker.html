
<!DOCTYPE HTML>
<html lang="zh-tw" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Docker · 纽扣夹子的笔记</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Clip">
        <meta name="identifier" content="123" scheme="ISBN">
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="harbor.html" />
    
    
    <link rel="prev" href="readme.html" />
    

    </head>
    <body>
        


<div class="book">
    <div class="book-summary">
        
            <div class="theme-code-header">
                <a href="./" class="link">
                    <h1 class="title">纽扣夹子的笔记</h1>
                </a>
            </div>
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="輸入並搜尋" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../linux/readme.html">
            
                <a href="../linux/readme.html">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../linux/contos-config.html">
            
                <a href="../linux/contos-config.html">
            
                    
                    Centos配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../linux/ubuntu-install.html">
            
                <a href="../linux/ubuntu-install.html">
            
                    
                    Ubuntu安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../linux/ubuntu-wine.html">
            
                <a href="../linux/ubuntu-wine.html">
            
                    
                    Ubuntu安装wine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../linux/linux-operation.html">
            
                <a href="../linux/linux-operation.html">
            
                    
                    Linux配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../linux/env-coding-error.html">
            
                <a href="../linux/env-coding-error.html">
            
                    
                    Linux环境编码错误
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../linux/ssh.html">
            
                <a href="../linux/ssh.html">
            
                    
                    ssh密钥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../linux/Tcpdump.html">
            
                <a href="../linux/Tcpdump.html">
            
                    
                    Tcpdump抓包工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../linux/VIM.html">
            
                <a href="../linux/VIM.html">
            
                    
                    VIM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../python/readme.html">
            
                <a href="../python/readme.html">
            
                    
                    Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../python/crc.html">
            
                <a href="../python/crc.html">
            
                    
                    CRC循環冗餘校驗
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../python/python-xadmin.html">
            
                <a href="../python/python-xadmin.html">
            
                    
                    python xadmin模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../python/python-sockt.html">
            
                <a href="../python/python-sockt.html">
            
                    
                    python sockt网络编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../python/python-unpack.html">
            
                <a href="../python/python-unpack.html">
            
                    
                    python打包Django
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../python/get-ip.html">
            
                <a href="../python/get-ip.html">
            
                    
                    python动态获取公网IP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../python/python-connection-sqlserver2008.html">
            
                <a href="../python/python-connection-sqlserver2008.html">
            
                    
                    python远程连接SqlServer2008R2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../python/python-dll.html">
            
                <a href="../python/python-dll.html">
            
                    
                    python调用dll
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../python/python-windows.html">
            
                <a href="../python/python-windows.html">
            
                    
                    python注册windows服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../python/python-str.html">
            
                <a href="../python/python-str.html">
            
                    
                    python字符操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../python/tornado-log.html">
            
                <a href="../python/tornado-log.html">
            
                    
                    Tornado日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../python/tornado-tcpserver.html">
            
                <a href="../python/tornado-tcpserver.html">
            
                    
                    Tornado TCPServer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.1" data-path="docker.html">
            
                <a href="docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="harbor.html">
            
                <a href="harbor.html">
            
                    
                    harbor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="harbor2.html">
            
                <a href="harbor2.html">
            
                    
                    harbor2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../v2ray/v2ray.html">
            
                <a href="../v2ray/v2ray.html">
            
                    
                    V2ray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../supervisor/readme.html">
            
                <a href="../supervisor/readme.html">
            
                    
                    supervisor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../supervisor/supervisor.html">
            
                <a href="../supervisor/supervisor.html">
            
                    
                    supervisor
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../windows/readme.html">
            
                <a href="../windows/readme.html">
            
                    
                    Windows
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../windows/windows-update-close.html">
            
                <a href="../windows/windows-update-close.html">
            
                    
                    windows自动更新关闭
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../redis.html">
            
                <a href="../redis.html">
            
                    
                    Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../selserver2008-trigger.html">
            
                <a href="../selserver2008-trigger.html">
            
                    
                    SQLServer2008触发器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../mysql.html">
            
                <a href="../mysql.html">
            
                    
                    Mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../postgresql.html">
            
                <a href="../postgresql.html">
            
                    
                    Postgresql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../shell.html">
            
                <a href="../shell.html">
            
                    
                    shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../git/git.html">
            
                <a href="../git/git.html">
            
                    
                    GIT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../other/readme.html">
            
                <a href="../other/readme.html">
            
                    
                    Other
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="" target="_blank" class="gitbook-link">
            作者：Clip
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Docker</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#docker"><b></b>DOCKER</a></li><li><span class="title-icon "></span><a href="#&#x53C2;&#x8003;&#xFF1A;"><b></b>&#x53C2;&#x8003;&#xFF1A;</a></li><li><span class="title-icon "></span><a href="#&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;"><b></b>&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#&#x53C2;&#x8003;"><b></b>&#x53C2;&#x8003;</a></li><li><span class="title-icon "></span><a href="#&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;"><b></b>&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#&#x5220;&#x9664;&#x955C;&#x50CF;"><b></b>&#x5220;&#x9664;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;"><b></b>&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;"><b></b>&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;"><b></b>&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;</a></li><li><span class="title-icon "></span><a href="#&#x6839;&#x636E;sha&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;"><b></b>&#x6839;&#x636E;sha&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;</a></li><li><span class="title-icon "></span><a href="#&#x91CA;&#x653E;&#x7A7A;&#x95F4;"><b></b>&#x91CA;&#x653E;&#x7A7A;&#x95F4;</a></li><li><span class="title-icon "></span><a href="#&#x9519;&#x8BEF;"><b></b>&#x9519;&#x8BEF;</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;register&#x9519;&#x8BEF;"><b></b>&#x542F;&#x52A8;register&#x9519;&#x8BEF;</a></li><li><span class="title-icon "></span><a href="#&#x7AEF;&#x53E3;&#x5360;&#x7528;"><b></b>&#x7AEF;&#x53E3;&#x5360;&#x7528;</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;"><b></b>&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;</a></li><li><span class="title-icon "></span><a href="#postgresql"><b></b>postgresql</a></li><li><span class="title-icon "></span><a href="#redis"><b></b>redis</a></li><li><span class="title-icon "></span><a href="#&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;"><b></b>&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;</a></li><li><span class="title-icon "></span><a href="#1&#x3001;"><b></b>1&#x3001;</a></li><li><span class="title-icon "></span><a href="#2&#x3001;"><b></b>2&#x3001;</a></li><li><span class="title-icon "></span><a href="#3&#x3001;"><b></b>3&#x3001;</a></li><li><span class="title-icon "></span><a href="#1&#x3001;postgresql&#x7684;postgresqlconf"><b></b>1&#x3001;postgresql&#x7684;postgresql.conf</a></li><li><span class="title-icon "></span><a href="#2&#x3001;postgresql&#x7684;pghbaconf"><b></b>2&#x3001;postgresql&#x7684;pg_hba.conf</a></li><li><span class="title-icon "></span><a href="#3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;settingspy"><b></b>3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;settings.py</a></li><li><span class="title-icon "></span><a href="#4&#x3001;"><b></b>4&#x3001;</a></li><li><span class="title-icon "></span><a href="#5&#x3001;"><b></b>5&#x3001;</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;redis&#x9519;&#x8BEF;"><b></b>&#x542F;&#x52A8;redis&#x9519;&#x8BEF;</a></li><li><span class="title-icon "></span><a href="#&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;"><b></b>&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;</a></li></ul></div><a href="#docker" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="docker"><a name="docker" class="anchor-navigation-ex-anchor" href="#docker"><i class="fa fa-link" aria-hidden="true"></i></a>DOCKER</h1>
<h1 id="&#x53C2;&#x8003;&#xFF1A;"><a name="&#x53C2;&#x8003;&#xFF1A;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x8003;&#xFF1A;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x8003;&#xFF1A;</h1>
<p><a href="https://yeasy.gitbooks.io/docker_practice/" target="_blank">Docker</a></p>
<p><a href="https://hub.docker.com/" target="_blank">DockerHub</a></p>
<p><a href="https://www.jianshu.com/p/3ee587517702" target="_blank">&#x8DDF;&#x9648;sir&#x4E00;&#x8D77;&#x73A9;&#x8F6C;docker&#x5377; &#x4E00;</a></p>
<p><a href="https://blog.csdn.net/dream_broken/article/details/52314993" target="_blank">docker&#x5B66;&#x4E60;5--docker&#x6570;&#x636E;&#x5377;(volume)</a></p>
<p><a href="https://blog.csdn.net/dongdong9223/article/details/71425077" target="_blank">docker&#x4E2D;&#x5BBF;&#x4E3B;&#x673A;&#x4E0E;&#x5BB9;&#x5668;&#xFF08;container&#xFF09;&#x4E92;&#x76F8;&#x62F7;&#x8D1D;&#x4F20;&#x9012;&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;</a></p>
<h1 id="&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;"><a name="&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x955C;&#x50CF;</h1>
<h1 id="&#x53C2;&#x8003;"><a name="&#x53C2;&#x8003;" class="anchor-navigation-ex-anchor" href="#&#x53C2;&#x8003;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53C2;&#x8003;</h1>
<p><a href="http://www.louisvv.com/archives/1130.html" target="_blank">Docker&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x642D;&#x5EFA;&#x53CA;&#x955C;&#x50CF;&#x5220;&#x9664;</a></p>
<p><a href="http://blog.51cto.com/302876016/1966816" target="_blank">docker&#x79C1;&#x6709;&#x4ED3;&#x5E93;&#x5220;&#x9664;image</a></p>
<p><a href="http://www.voidcn.com/article/p-toomzlub-brm.html" target="_blank">docker &#x67E5;&#x8BE2;&#x6216;&#x83B7;&#x53D6;&#x79C1;&#x6709;&#x4ED3;&#x5E93;(registry)&#x4E2D;&#x7684;&#x955C;&#x50CF;</a></p>
<p><a href="https://blog.csdn.net/u010884123/article/details/56838644" target="_blank">Docker Registry&#x4E4B;&#x5220;&#x9664;&#x955C;&#x50CF;&#x3001;&#x5783;&#x573E;&#x56DE;&#x6536;</a></p>
<h1 id="&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;"><a name="&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</h1>
<p>&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;<code>register</code>&#x5BB9;&#x5668;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5141;&#x8BB8;&#x5176;&#x5220;&#x9664;&#x955C;&#x50CF;&#x3002;</p>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x4F4D;<code>config.yml</code></p>
<p>&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8981;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5E76;&#x4EE5;&#x6B64;&#x6587;&#x4EF6;&#x6765;&#x5141;&#x8BB8;<code>register</code>&#x5BB9;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x7269;&#x7406;&#x673A;
&#x4E0A;&#x5FC5;&#x7136;&#x5C31;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x8FD0;&#x884C;&#x4E00;&#x6B21;<code>register</code>&#x5BB9;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x5176;&#x4E2D;&#x62F7;&#x51FA;&#x8FD9;&#x4E2A;
&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x505A;&#x4FEE;&#x6539;</p>
<pre><code>$ docker run -d -p 5000:5000 -v /opt/data/registry:/var/lib/registry registry
561d1e831f8376684d7d82d3616c6d90135c785cdbfff3fd296a8f4a67be1d70
$ docker cp 561:/etc/docker/registry/config.yml ./
$ vim config.yml
</code></pre><p>&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x627E;&#x5230;</p>
<pre><code>storage:
  cache:
    blobdescriptor: inmemory
  filesystem:
    rootdirectory: /var/lib/registry
</code></pre><p>&#x52A0;&#x5165;&#x4E00;&#x53E5;&#x914D;&#x7F6E;&#xFF1A;</p>
<pre><code>storage:
  delete:
      enabled: true
  cache:
    blobdescriptor: inmemory
  filesystem:
    rootdirectory: /var/lib/registry
</code></pre><p>&#x518D;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x4FBF;&#x53EF;&#x5220;&#x9664;&#x4ED3;&#x5E93;&#x955C;&#x50CF;</p>
<pre><code>$ docker run -d -v /home/jyt/config.yml:/etc/docker/registry/config.yml \
&gt; -v /opt/data/registry:/var/lib/registry \
&gt; -p 5000:5000 --restart=always --name registry registry
6f425cd3aadb256e25cc37bad0d49b3d9fa614901dd0e6ddc7c121806b9b1b72
</code></pre><h1 id="&#x5220;&#x9664;&#x955C;&#x50CF;"><a name="&#x5220;&#x9664;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#&#x5220;&#x9664;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;&#x955C;&#x50CF;</h1>
<h1 id="&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;"><a name="&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#x73B0;&#x6709;&#x955C;&#x50CF;</h1>
<pre><code>$ curl server:port/v2/_catalog
{&quot;repositories&quot;:[&quot;alpine&quot;,&quot;ubuntu&quot;]}
</code></pre><h1 id="&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;"><a name="&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x5728;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x7248;&#x672C;</h1>
<pre><code>$ curl server:port/v2/ubuntu/tags/list
{&quot;name&quot;:&quot;ubuntu&quot;,&quot;tags&quot;:[&quot;18.04&quot;]}
</code></pre><h1 id="&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;"><a name="&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x955C;&#x50CF;&#x7248;&#x672C;&#x7684;sha&#x7801;</h1>
<pre><code>$ curl --header &quot;Accept: application/vnd.docker.distribution.manifest.v2+json&quot;  -I -XGET server:port/v2/ubuntu/manifests/18.04
HTTP/1.1 200 OK
Content-Length: 1150
Content-Type: application/vnd.docker.distribution.manifest.v2+json
Docker-Content-Digest: sha256:be159ff0e12a38fd2208022484bee14412680727ec992680b66cdead1ba76d19
Docker-Distribution-Api-Version: registry/2.0
Etag: &quot;sha256:be159ff0e12a38fd2208022484bee14412680727ec992680b66cdead1ba76d19&quot;
X-Content-Type-Options: nosniff
Date: Thu, 21 Feb 2019 05:20:54 GMT
</code></pre><h1 id="&#x6839;&#x636E;sha&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;"><a name="&#x6839;&#x636E;sha&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;" class="anchor-navigation-ex-anchor" href="#&#x6839;&#x636E;sha&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6839;&#x636E;<code>sha</code>&#x7801;&#x5220;&#x9664;&#x955C;&#x50CF;</h1>
<pre><code>$ curl -XDELETE server:port/v2/ubuntu/manifests/sha256:be159ff0e12a38fd2208022484bee14412680727ec992680b66cdead1ba76d19
</code></pre><p>&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7684;&#xFF0C;linux&#x7684;&#x54F2;&#x5B66;&#x201C;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#xFF0C;&#x5C31;&#x662F;&#x597D;&#x6D88;&#x606F;&#x201D;</p>
<p>&#x4F46;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x5220;&#x9664;&#x4E86;&#x4E00;&#x4E2A;&#x201C;&#x6807;&#x7B7E;&#x201D;&#xFF0C;&#x518D;&#x6B21;&#x67E5;&#x8BE2;&#x4ED3;&#x5E93;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x955C;&#x50CF;&#x540D;&#x5B57;&#x4EFB;&#x7136;
&#x5728;&#xFF0C;&#x800C;&#x67E5;&#x8BE2;&#x7248;&#x672C;&#x65F6;&#x5C31;&#x627E;&#x4E0D;&#x5230;&#x6307;&#x5B9A;&#x7248;&#x672C;</p>
<pre><code>$ curl server:port/v2/ubuntu/tags/list
{&quot;name&quot;:&quot;ubuntu&quot;,&quot;tags&quot;:null}
</code></pre><h1 id="&#x91CA;&#x653E;&#x7A7A;&#x95F4;"><a name="&#x91CA;&#x653E;&#x7A7A;&#x95F4;" class="anchor-navigation-ex-anchor" href="#&#x91CA;&#x653E;&#x7A7A;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x91CA;&#x653E;&#x7A7A;&#x95F4;</h1>
<p>&#x60F3;&#x8981;&#x91CA;&#x653E;&#x7A7A;&#x95F4;&#x53EA;&#x80FD;&#x8FDB;&#x670D;&#x52A1;&#x5668;&#x7684;<code>register</code>&#x5BB9;&#x5668;&#x5185;&#x64CD;&#x4F5C;&#x4E86;&#xFF08;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FDB;&#x884C;&#xFF09;</p>
<pre><code>$ docker container ls
6f425cd3aadb        registry            &quot;/entrypoint.sh /etc&#x2026;&quot;   About an hour ago   Up About an hour    0.0.0.0:5000-&gt;5000/tcp   registry
$ docker exec -it 6f4 /bin/sh

/ #  cd /var/lib/registry
/ #  du -sh 
33.8M
</code></pre><p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5B58;&#x50A8;&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x5927;&#x5C0F;&#xFF0C;33.8M&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x7591;&#x95EE;&#xFF0C;&#x4E0A;&#x4F20;&#x7684;&#x955C;&#x50CF;&#x5927;&#x5C0F;&#x548C;&#x4ED3;&#x5E93;&#x5B58;&#x50A8;&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x5927;&#x5C0F;&#x5DEE;&#x592A;&#x591A;&#xFF0C;&#x5B58;&#x50A8;&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#x5C0F;&#x5F88;&#x591A;</p>
<pre><code>registry garbage-collect /etc/docker/registry/config.yml
</code></pre><p>&#x4EE5;&#x4E0A;&#xFF0C;&#x4FBF;&#x5B8C;&#x6210;&#x4E86;&#x7F51;&#x4E0A;&#x6240;&#x8C13;&#x7684;&#x955C;&#x50CF;&#x5220;&#x9664;&#x3002;</p>
<p>&#x518D;&#x6B21;&#x5C1D;&#x8BD5;&#x4E4B;&#x540E;&#x53D1;&#x73B0;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x5220;&#x9664;&#x4E4B;&#x540E;&#x518D;&#x6B21;<code>push</code>&#x4E0A;&#x53BB;&#x4E4B;&#x540E;&#x5C31;&#x65E0;&#x6CD5;<code>pull</code>&#x4E0B;&#x6765;&#x4E86;</p>
<pre><code>$ docker pull server:port/ubuntu:18.04
Error response from daemon: manifest for 139.199.9.116:5000/ubuntu:18.04 not found
</code></pre><h1 id="&#x9519;&#x8BEF;"><a name="&#x9519;&#x8BEF;" class="anchor-navigation-ex-anchor" href="#&#x9519;&#x8BEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x9519;&#x8BEF;</h1>
<h1 id="&#x542F;&#x52A8;register&#x9519;&#x8BEF;"><a name="&#x542F;&#x52A8;register&#x9519;&#x8BEF;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;register&#x9519;&#x8BEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x542F;&#x52A8;register&#x9519;&#x8BEF;</h1>
<p>&#x53C2;&#x8003;&#xFF1A;<a href="https://www.cnblogs.com/hailun1987/p/7518306.html" target="_blank">docker&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x6216;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x65F6;&#x62A5;&#x9519;Error response from daemon: driver failed programming external connectivity on endpoint quirky_allen</a></p>
<pre><code>docker: Error response from daemon: driver failed programming external 
connectivity on endpoint romantic_sanderson (12565e44485be0ef9d5c282
e325d76dc4e8a1e38f71f2764fbf83bbcb18e27be):  (iptables failed: iptables
--wait -t nat -A DOCKER -p tcp -d 0/0 --dport 5000 -j DNAT --to-destination 
172.17.0.2:5000 ! -i docker0: iptables: No chain/target/match by that name.
 (exit status 1)).
</code></pre><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x91CD;&#x542F;docker</p>
<pre><code>$ systemctl restart docker
</code></pre><h1 id="&#x7AEF;&#x53E3;&#x5360;&#x7528;"><a name="&#x7AEF;&#x53E3;&#x5360;&#x7528;" class="anchor-navigation-ex-anchor" href="#&#x7AEF;&#x53E3;&#x5360;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7AEF;&#x53E3;&#x5360;&#x7528;</h1>
<p>&#x5728;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x65F6;&#x62A5;&#x9519;</p>
<pre><code>Error response from daemon: driver failed programming external connectivity on endpoint redis (6c89629a558b666e5fba1c3ad27d6de3c4b341ee1005dae9ab3ec7b797cfdf1d): Error starting userland proxy: listen tcp 0.0.0.0:6379: bind: address already in use
Error: failed to start containers: redis
</code></pre><p>&#x539F;&#x56E0;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x7AEF;&#x53E3;&#x88AB;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x91CA;&#x653E;&#x8BE5;&#x7AEF;&#x53E3;</p>
<pre><code>$ lsof -i:6379
</code></pre><p>&#x5F88;&#x5C34;&#x5C2C;&#x7684;&#x4E8B;&#x60C5;&#x53D1;&#x751F;&#x4E86;&#xFF0C;<code>lsof</code>&#x6CA1;&#x6709;&#x8F93;&#x51FA;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x4EE3;&#x8868;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x8FDB;&#x7A0B;&#x6B63;&#x5728;&#x4F7F;&#x7528;
&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x53C8;&#x5207;&#x5207;&#x5B9E;&#x5B9E;&#x7684;&#x88AB;&#x5360;&#x7528;&#x7740;&#x3002;&#x5BF9;&#x4E8E;<code>lsof</code>&#x7684;&#x4F5C;&#x7528;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x91CD;&#x65B0;
&#x8BA4;&#x77E5;&#x4E00;&#x4E0B;&#x4E86;&#xFF0C;&#x4F46;&#x73B0;&#x5728;&#x4E0D;&#x662F;&#x641E;&#x8FD9;&#x4E2A;&#x7684;&#x65F6;&#x5019;&#x3002;</p>
<p>&#x597D;&#x5728;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x9ED8;&#x8BA4;&#x662F;<code>redis</code>&#x7684;&#x670D;&#x52A1;&#x5728;&#x4F7F;&#x7528;&#xFF0C;&#x4E8E;&#x662F;</p>
<pre><code>$ sudo service redis-server stop
</code></pre><p>&#x505C;&#x6B62;<code>redis</code>&#x670D;&#x52A1;&#x95F4;&#x63A5;&#x5B9E;&#x73B0;&#x91CA;&#x653E;&#x8BE5;&#x7AEF;&#x53E3;</p>
<h1 id="&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;"><a name="&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x547D;&#x4EE4;&#x53C2;&#x8003;</h1>
<h1 id="postgresql"><a name="postgresql" class="anchor-navigation-ex-anchor" href="#postgresql"><i class="fa fa-link" aria-hidden="true"></i></a>postgresql</h1>
<pre><code>$ docker run -dit -p 5432:5432 --name postgresql \
&gt; --mount source=postgresql,target=/var/lib/postgresql \
&gt; -u postgres jyt:v11\
&gt; /usr/lib/postgresql/9.3/bin/postgres \
&gt; -D /var/lib/postgresql/9.3/main \
&gt; -c config_file=/etc/postgresql/9.3/main/postgresql.conf
</code></pre><p>&#x53C2;&#x8003;:<a href="https://segmentfault.com/a/1190000004518306" target="_blank">&#x4F7F;&#x7528;docker&#x90E8;&#x7F72;PostgreSQL&#x6570;&#x636E;&#x5E93;</a></p>
<h1 id="redis"><a name="redis" class="anchor-navigation-ex-anchor" href="#redis"><i class="fa fa-link" aria-hidden="true"></i></a>redis</h1>
<pre><code>$ docker run -dit --network jyt-net \
&gt; --mount source=redis,target=/var/lib/redis \
&gt; -p 6379:6379 \
&gt; --name redis jyt:v11 \
&gt; /usr/bin/redis-server
</code></pre><p>&#x53C2;&#x8003;&#xFF1A;<a href="http://www.runoob.com/docker/docker-install-redis.html" target="_blank">Docker &#x5B89;&#x88C5; Redis</a></p>
<p>redis-server --appendonly yes : &#x5728;&#x5BB9;&#x5668;&#x6267;&#x884C;redis-server&#x542F;&#x52A8;&#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x6253;&#x5F00;
redis&#x6301;&#x4E45;&#x5316;&#x914D;&#x7F6E;</p>
<h1 id="&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;"><a name="&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;" class="anchor-navigation-ex-anchor" href="#&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5728;docker&#x4E2D;&#x90E8;&#x7F72;postgresql&#x542F;&#x52A8;&#x9519;&#x8BEF;</h1>
<h1 id="1&#x3001;"><a name="1&#x3001;" class="anchor-navigation-ex-anchor" href="#1&#x3001;"><i class="fa fa-link" aria-hidden="true"></i></a>1&#x3001;</h1>
<pre><code>web_1    | django.db.utils.OperationalError: FATAL:  no pg_hba.conf entry for host &quot;172.18.0.4&quot;, user &quot;postgres&quot;, database &quot;postgres&quot;, SSL on
web_1    | FATAL:  no pg_hba.conf entry for host &quot;172.18.0.4&quot;, user &quot;postgres&quot;, database &quot;postgres&quot;, SSL off
web_1    | 
db-com   | 2019-02-26 12:11:43.925 CST [19] postgres@postgres FATAL:  no pg_hba.conf entry for host &quot;172.18.0.4&quot;, user &quot;postgres&quot;, database &quot;p
ostgres&quot;, SSL on
db-com   | 2019-02-26 12:11:43.928 CST [20] postgres@postgres FATAL:  no pg_hba.conf entry for host &quot;172.18.0.4&quot;, user &quot;postgres&quot;, database &quot;p
ostgres&quot;, SSL off
</code></pre><p>&#x5982;&#x4E0A;&#x63D0;&#x793A;&#xFF0C;&#x7531;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x5931;&#x8D25;&#x5BFC;&#x81F4;</p>
<p>&#x7531;&#x4E8E;&#x9996;&#x6B21;&#x5B89;&#x88C5;postgresql&#x65F6;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;<code>postgres</code>&#x7684;Unix&#x7528;&#x6237;&#x548C;&#x4E00;&#x4E2A;<code>postgres</code>
&#x7684;&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#xFF0C;Unix&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x53EF;&#x4EE5;&#x4E0D;&#x7BA1;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#xFF0C;&#x8981;&#x6267;&#x884C;postgres
&#x547D;&#x4EE4;&#x5FC5;&#x987B;&#x5207;&#x6362;&#x5230;<code>postgres</code>&#x7528;&#x6237;&#x4E0B;&#x3002;&#x800C;&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;<code>postgres</code>&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#x5C31;&#x4F1A;
&#x5BFC;&#x81F4;&#x5916;&#x90E8;&#x8FDB;&#x7A0B;&#x65E0;&#x6CD5;&#x8FDE;&#x63A5;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x5BC6;&#x7801;&#xFF0C;&#x8FDE;&#x63A5;&#x65F6;&#x4E0D;&#x7ED9;&#x5BC6;&#x7801;&#x5C31;&#x4F1A;&#x63D0;&#x793A;</p>
<pre><code>2019-02-26 14:16:11.230 CST [19] postgres@postgres FATAL:  password authentication failed for user &quot;postgres&quot;
2019-02-26 14:16:11.230 CST [19] postgres@postgres DETAIL:  User &quot;postgres&quot; has no password assigned.
    Connection matched pg_hba.conf line 95: &quot;host  all  all 0.0.0.0/0 md5&quot;
2019-02-26 14:16:11.233 CST [20] postgres@postgres FATAL:  password authentication failed for user &quot;postgres&quot;
2019-02-26 14:16:11.233 CST [20] postgres@postgres DETAIL:  User &quot;postgres&quot; has no password assigned.
    Connection matched pg_hba.conf line 95: &quot;host  all  all 0.0.0.0/0 md5&quot;
</code></pre><p>&#x800C;&#x968F;&#x4FBF;&#x7ED9;&#x4E2A;&#x5BC6;&#x7801;&#x53C8;&#x4F1A;</p>
<pre><code>FATAL:  password authentication failed for user &quot;postgres&quot;
</code></pre><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x7528;&#x6237;<code>postgres</code>&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5207;&#x6362;&#x5230;Unix&#x7684;postgres&#x7528;&#x6237;&#x4E0B;&#x6267;&#x884C;</p>
<pre><code>$ su postgres
$ psql --command &quot; ALTER USER postgres WITH PASSWORD &apos;123456&apos;;&quot;
</code></pre><p>&#x5728;Dockerfile&#x4E2D;&#x5219;&#x662F;</p>
<pre><code>USER postgres
RUN /etc/init.d/postgresql restart \
        &amp;&amp; psql --command &quot; ALTER USER postgres WITH PASSWORD &apos;123456&apos;;&quot; \
        &amp;&amp; /etc/init.d/postgresql stop
</code></pre><h1 id="2&#x3001;"><a name="2&#x3001;" class="anchor-navigation-ex-anchor" href="#2&#x3001;"><i class="fa fa-link" aria-hidden="true"></i></a>2&#x3001;</h1>
<pre><code>db-com   | 2019-02-26 13:41:56.227 CST [11] LOG:  could not open temporary statistics file &quot;/var/run/postgresql/10-main.pg_stat_tmp/global.tmp&quot;: No such file or directory
</code></pre><p>&#x6309;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x521B;&#x5EFA;&#x8BE5;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x5C06;&#x6240;&#x6709;&#x8005;&#x6539;&#x4E3A;<code>postgres</code></p>
<pre><code>$ mkdir -p /var/run/postgresql/10-main.pg_stat_tmp \
$ chown -R postgres:postgres /var/run/postgresql/10-main.pg_stat_tmp
</code></pre><h1 id="3&#x3001;"><a name="3&#x3001;" class="anchor-navigation-ex-anchor" href="#3&#x3001;"><i class="fa fa-link" aria-hidden="true"></i></a>3&#x3001;</h1>
<pre><code>db-com   | 2019-02-26 13:50:14.828 CST [1] LOG:  listening on IPv4 address &quot;127.0.0.1&quot;, port 5432
db-com   | 2019-02-26 13:50:14.828 CST [1] LOG:  could not bind IPv6 address &quot;::1&quot;: Cannot assign requested address
db-com   | 2019-02-26 13:50:14.828 CST [1] HINT:  Is another postmaster already running on port 5432? If not, wait a few seconds and retry.
db-com   | 2019-02-26 13:50:14.831 CST [1] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;
db-com   | 2019-02-26 13:50:14.863 CST [6] LOG:  database system was shut down at 2019-02-26 12:28:48 CST
db-com   | 2019-02-26 13:50:14.881 CST [1] LOG:  database system is ready to accept connections
</code></pre><p>&#x4F46;&#x662F;web&#x670D;&#x52A1;&#x8FDE;&#x63A5;&#x65F6;&#x5374;&#x51FA;&#x73B0;</p>
<pre><code>web_1    | django.db.utils.OperationalError: could not connect to server: Connection refused
web_1    |     Is the server running on host &quot;db&quot; (172.18.0.3) and accepting
web_1    |     TCP/IP connections on port 5432?
</code></pre><p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6BD4;&#x8F83;&#x5FAE;&#x5999;&#xFF0C;&#x6211;&#x76EE;&#x524D;&#x5DF2;&#x77E5;&#x7684;&#x539F;&#x56E0;&#x6709;&#x4E09;&#x4E2A;&#xFF0C;&#x76EE;&#x524D;&#x6B63;&#x5728;&#x63A5;&#x89E6;&#x7684;web&#x9879;&#x76EE;&#x4E3A;django&#xFF0C;
&#x6240;&#x4EE5;&#x6B64;&#x5904;&#x5217;&#x51FA;django&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x63D0;&#x4F9B;&#x53C2;&#x8003;</p>
<h1 id="1&#x3001;postgresql&#x7684;postgresqlconf"><a name="1&#x3001;postgresql&#x7684;postgresqlconf" class="anchor-navigation-ex-anchor" href="#1&#x3001;postgresql&#x7684;postgresqlconf"><i class="fa fa-link" aria-hidden="true"></i></a>1&#x3001;postgresql&#x7684;<code>postgresql.conf</code></h1>
<p>&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;</p>
<pre><code>#  - Connection Settings -

listen_addresses = &apos;127.0.0.1&apos;        #  what IP address(es) to listen on;
                    #  comma-separated list of addresses;
                    #  defaults to &apos;localhost&apos;; use &apos;*&apos; for all
                    #  (change requires restart)
port = 5432             #  (change requires restart)
max_connections = 100           #  (change requires restart)
# superuser_reserved_connections = 3 #  (change requires restart)
</code></pre><p>&#x5C06;<code>listen_addresses</code>&#x6539;&#x4E3A;<code>listen_addresses = &apos;0.0.0.0&apos;</code></p>
<p>&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#xFF0C;&#x5728;&#x5BB9;&#x5668;&#x4E2D;&#x542F;&#x52A8;&#x65F6;<code>127.0.0.1</code>&#x603B;&#x662F;&#x6307;&#x5411;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#xFF0C;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x76D1;&#x542C;&#x6765;&#x81EA;&#x5916;&#x90E8;&#x5176;&#x4ED6;
&#x5BB9;&#x5668;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
<h1 id="2&#x3001;postgresql&#x7684;pghbaconf"><a name="2&#x3001;postgresql&#x7684;pghbaconf" class="anchor-navigation-ex-anchor" href="#2&#x3001;postgresql&#x7684;pghbaconf"><i class="fa fa-link" aria-hidden="true"></i></a>2&#x3001;postgresql&#x7684;<code>pg_hba.conf</code></h1>
<p>&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x4E2D;&#x627E;&#x5230;</p>
<pre><code> #  Database administrative login by Unix domain socket
 local   all             postgres                                peer

 #  TYPE  DATABASE        USER            ADDRESS                 METHOD

 #  &quot;local&quot; is for Unix domain socket connections only
 local   all             all                                     trust
 #  IPv4 local connections:
 host    all             all             127.0.0.1/32            md5
 #  IPv6 local connections:
 host    all             all             ::1/128                 md5
</code></pre><p>&#x4FDD;&#x8BC1;&#x548C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5185;&#x5BB9;&#x76F8;&#x540C;&#xFF0C;&#x5176;&#x4E2D;<code>trust</code>&#x5728;&#x8F83;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>peer</code>&#x4EE3;&#x66FF;</p>
<h1 id="3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;settingspy"><a name="3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;settingspy" class="anchor-navigation-ex-anchor" href="#3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;settingspy"><i class="fa fa-link" aria-hidden="true"></i></a>3&#x3001;django&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>settings.py</code></h1>
<p>&#x627E;&#x5230;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x7684;&#x914D;&#x7F6E;&#x5185;&#x5BB9;</p>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        # &apos;ENGINE&apos;: &apos;django.db.backends.sqlite3&apos;,
        # &apos;NAME&apos;: os.path.join(BASE_DIR, &apos;db.sqlite3&apos;),
        &apos;ENGINE&apos;: &apos;django.db.backends.postgresql_psycopg2&apos;,
        &apos;NAME&apos;: &apos;postgres&apos;,
        &apos;USER&apos;:&apos;postgres&apos;,
        &apos;PASSWORD&apos;:&apos;123456&apos;,
        &apos;HOST&apos;:&apos;db&apos;,
        &apos;PORT&apos;:&apos;5432&apos;,
    }
</code></pre><p>&#x5176;&#x4E2D;<code>&apos;HOST&apos;:&apos;db&apos;</code>&#x9700;&#x8981;&#x6307;&#x5411;&#x5177;&#x4F53;&#x5BB9;&#x5668;&#x7684;<code>&#x670D;&#x52A1;&#x540D;&#x79F0;</code>&#xFF0C;&#x539F;&#x56E0;&#x548C;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;
<code>localhost</code>&#x5C06;&#x4F1A;&#x4E00;&#x76F4;&#x6307;&#x5411;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x3002;&#x4E5F;&#x5C31;&#x662F;django&#x4F1A;&#x5728;
&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x4E0B;&#x67E5;&#x627E;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x662F;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5374;&#x5728;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#x63D0;&#x4F9B;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6211;&#x65F6;&#x4F7F;&#x7528;<code>docker-compose</code>&#x6765;&#x7BA1;&#x7406;&#x5BB9;&#x5668;&#xFF0C;&#x800C;<code>compose</code>&#x5219;&#x662F;<code>&#x9879;&#x76EE;</code>&#x548C;<code>&#x670D;&#x52A1;</code>
&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x8FD9;&#x91CC;&#x7A0D;&#x5FAE;&#x8F6C;&#x6362;&#x4E00;&#x4E0B;</p>
<p><code>compose</code>&#x5C06;&#x6570;&#x4E2A;&#x5BB9;&#x5668;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x6574;&#x4E2A;&#x6210;&#x4E00;&#x8D77;&#xFF0C;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;<code>&#x9879;&#x76EE;</code>&#xFF0C;&#x800C;&#x6BCF;&#x4E2A;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;
&#x6545;&#x5C06;&#x5BB9;&#x5668;&#x79F0;&#x4E3A;<code>&#x670D;&#x52A1;</code></p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;<code>compose</code>&#x7684;&#x8BDD;&#xFF0C;&#x6BD4;&#x5982;&#x76F4;&#x63A5;&#x4F7F;&#x7528;docker&#x7F51;&#x6865;&#x670D;&#x52A1;&#x6765;&#x8FDE;&#x63A5;&#x5BB9;&#x5668;&#x5C06;&#x7684;
&#x901A;&#x4FE1;&#xFF0C;&#x5219;&#x8FD9;&#x91CC;&#x7684;<code>HOSTS</code>&#x5219;&#x6307;&#x5411;&#x8BE5;&#x5BB9;&#x5668;&#x5728;&#x7F51;&#x6865;&#x4E2D;&#x7684;IP&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</p>
<pre><code>docker inspect &lt;container id&gt;
</code></pre><p>&#x6765;&#x67E5;&#x770B;&#x5177;&#x4F53;&#x5BB9;&#x5668;&#x7684;IP</p>
<h1 id="4&#x3001;"><a name="4&#x3001;" class="anchor-navigation-ex-anchor" href="#4&#x3001;"><i class="fa fa-link" aria-hidden="true"></i></a>4&#x3001;</h1>
<pre><code>PermissionError: [Errno 13] Permission denied: &apos;/code/jimi_commd.log&apos;
</code></pre><p>&#x7528;&#x66F4;&#x9AD8;&#x7684;&#x7528;&#x6237;&#x6743;&#x9650;&#x6216;&#x8005;&#x4FEE;&#x6539;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x548C;&#x6240;&#x6709;&#x8005;</p>
<h1 id="5&#x3001;"><a name="5&#x3001;" class="anchor-navigation-ex-anchor" href="#5&#x3001;"><i class="fa fa-link" aria-hidden="true"></i></a>5&#x3001;</h1>
<pre><code>no pg_hba.conf entry for host &quot;172.18.0.4&quot;, user &quot;postgres&quot;, database &quot;postgres&quot;, SSL on
</code></pre><p>&#x5C06;<code>172.18.0.4</code>&#x6DFB;&#x52A0;&#x8FDB;<code>pg_hba.conf</code></p>
<pre><code>echo &quot;host all all 172.18.0.4/16 md5&quot; &gt;&gt; pg_hba.conf
</code></pre><h1 id="&#x542F;&#x52A8;redis&#x9519;&#x8BEF;"><a name="&#x542F;&#x52A8;redis&#x9519;&#x8BEF;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;redis&#x9519;&#x8BEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x542F;&#x52A8;redis&#x9519;&#x8BEF;</h1>
<p><img src="../../static/file/QQ&#x622A;&#x56FE;2019022716234920190227.png" alt="QQ&#x622A;&#x56FE;2019022716234920190227.png"></p>
<p><img src="../../static/file/QQ&#x622A;&#x56FE;2019022716242920190227.png" alt="QQ&#x622A;&#x56FE;2019022716242920190227.png"></p>
<p><img src="../../static/file/QQ&#x622A;&#x56FE;2019022716245920190227.png" alt="QQ&#x622A;&#x56FE;2019022716245920190227.png"></p>
<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>redis.conf</code>,&#x627E;&#x5230;</p>
<pre><code>bind 127.0.0.1
# protected-mode yes
</code></pre><p>&#x6539;&#x4E3A;</p>
<pre><code># bind 127.0.0.1
protected-mode no
</code></pre><p>&#x6CE8;&#x91CA;&#x6389;<code>bind</code>&#x800C;&#x4E0D;&#x662F;&#x6539;&#x6210;<code>0.0.0.0</code>&#x5C31;&#x80FD;&#x5141;&#x8BB8;&#x6240;&#x6709;&#x4E3B;&#x673A;&#x8FDE;&#x63A5;</p>
<p><code>protected-mode no</code> &#x5219;&#x662F;&#x5173;&#x95ED;&#x5B89;&#x5168;&#x6A21;&#x5F0F;</p>
<p>&#x4FEE;&#x6539;&#x5B8C;&#x8FD9;&#x4E24;&#x90E8;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x91CD;&#x542F;<code>redis</code>&#x5E76;&#x6267;&#x884C;</p>
<pre><code>$ redis-server --protected-mode no
</code></pre><p>&#x4F7F;&#x914D;&#x7F6E;&#x751F;&#x6548;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x4E00;&#x76F4;&#x63D0;&#x793A;</p>
<pre><code>redis.exceptions.ResponseError: DENIED Redis is running in protected 
mode because protected mode is enabled, no bind address was specified,
no authentication password is requested to clients. In this mode 
connections are only accepted from the loopback interface. 
If you want to connect from external computers to Redis you may adopt 
one of the following solutions: 1) Just disable protected mode sending the
command &apos;CONFIG SET protected-mode no&apos; from the loopback interface 
by connecting to Redis from the same host the server is running, however 
MAKE SURE Redis is not publicly accessible from internet if you do so. 
Use CONFIG REWRITE to make this change permanent. 2) Alternatively you
can just disable the protected mode by editing the Redis configuration file, 
and setting the protected mode option to &apos;no&apos;, and then restarting the 
server. 3) If you started the server manually just for testing, restart it with 
the &apos;--protected-mode no&apos; option. 4) Setup a bind address or an 
authentication password. NOTE: You only need to do one of the above 
things in order for the server to start accepting connections from the 
outside.
</code></pre><h1 id="&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;"><a name="&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;" class="anchor-navigation-ex-anchor" href="#&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x89E3;&#x51B3;&#x9519;&#x8BEF;&#x53C2;&#x8003;&#xFF1A;</h1>
<p><a href="https://github.com/kartoza/docker-postgis/issues/55" target="_blank">docker-compose error # 55</a></p>
<p><a href="https://blog.csdn.net/ghostliming/article/details/53312493" target="_blank">PostgreSQL&#x5B66;&#x4E60;&#x7B2C;&#x4E94;&#x7BC7;--&#x76D1;&#x542C;&#x5730;&#x5740;&#x53CA;&#x7AEF;&#x53E3;&#x4FEE;&#x6539;</a></p>
<p><a href="http://lazybios.com/2016/11/how-to-make-postgreSQL-can-be-accessed-from-remote-client/" target="_blank">&#x5982;&#x4F55;&#x8BBE;&#x7F6E;PostgreSQL&#x5141;&#x8BB8;&#x88AB;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;</a></p>
<p><a href="https://blog.csdn.net/sannerlittle/article/details/77063800" target="_blank">&#x5982;&#x4F55;&#x83B7;&#x53D6; docker &#x5BB9;&#x5668;(container)&#x7684; ip &#x5730;&#x5740;</a></p>
<p><a href="https://stackoverflow.com/questions/7695962/postgresql-password-authentication-failed-for-user-postgres" target="_blank">Postgresql: password authentication failed for user &#x201C;postgres&#x201D;</a></p>
<p><a href="https://serverfault.com/questions/881064/postgres-9-5-main-pg-stat-tmp-no-such-file-or-directory" target="_blank">Postgres 9.5-main.pg_stat_tmp: No such file or directory</a></p>
<p><a href="https://github.com/torhve/pix/issues/2" target="_blank">PostgreSQL script fails # 2</a></p>
<footer class="page-footer"><span class="copyright">By Clip all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2019-10-10 11:42:31
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="readme.html" class="navigation navigation-prev " aria-label="Previous page: Docker">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="harbor.html" class="navigation navigation-next " aria-label="Next page: harbor">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Docker","level":"1.4.1","depth":2,"next":{"title":"harbor","level":"1.4.2","depth":2,"path":"book/docker/harbor.md","ref":"book/docker/harbor.md","articles":[]},"previous":{"title":"Docker","level":"1.4","depth":1,"path":"book/docker/readme.md","ref":"book/docker/readme.md","articles":[{"title":"Docker","level":"1.4.1","depth":2,"path":"book/docker/docker.md","ref":"book/docker/docker.md","articles":[]},{"title":"harbor","level":"1.4.2","depth":2,"path":"book/docker/harbor.md","ref":"book/docker/harbor.md","articles":[]},{"title":"harbor2","level":"1.4.3","depth":2,"path":"book/docker/harbor2.md","ref":"book/docker/harbor2.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["theme-code@0.0.20","-sharing","-lunr","-search","search-pro","splitter","tbfed-pagefooter","expandable-chapters-small","github","-sharing-plus","code","-copy-code-button","anchor-navigation-ex","edit-link","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"By Clip","modify_label":"修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"https://github.com/niukoujiazi"},"livereload":{},"splitter":{},"search-pro":{},"code":{"copyButtons":true},"theme-code":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":false},"expandable-chapters-small":{},"edit-link":{"label":"","base":"https://github.com/niukoujiazi"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"Clip","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"123","variables":{},"title":"纽扣夹子的笔记","language":"zh-tw","gitbook":"*","description":"纽扣夹子的笔记","direction":"ltr"},"file":{"path":"book/docker/docker.md","mtime":"2019-10-10T03:42:31.066Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-10-11T03:37:57.163Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>


        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

